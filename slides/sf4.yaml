sf4:
    intro:
        sections:
            - content: |
                ![Alex Rock avatar](//fr.gravatar.com/userimage/41973088/0fbe36bcaaf555341ef5cd2fd1017128.jpg?size=250)

                **Alex Rock**

                PHP / Symfony dev & trainer

                `@pierstoval`

    whats_new:
        title: 'Quoi de neuf chez Symfony ?'
        sections:
            - content: |
                Programme¬†:

                * Programme
                * Interactivit√©
                * Symfony 3.x
                * Symfony 4.x
                * Cr√©ation d'un projet Flex

    interact:
        title: 'Conf√©rence¬†INTERACTIVE'
        title_htmlattr: 'style="color:#eee;text-shadow:0 2px 10px #000,0 2px 10px #000;"'
        htmlattr: data-background-image="{{ asset('img/interactive_wall.gif') }}"

    button_url:
        sections:
            - content: |
                Pour participer, acc√©dez √† cette url:

                [piers.ovh/sf4](https://piers.ovh/sf4)

    reminder:
        title: 'Petit rappel'
        sections:
            - content: |
                Symfony c'est :

                * Ses cr√©ateurs : [SensioLabs](https://sensiolabs.com)
                * Ses contributeurs : Symfony [core team](https://symfony.com/doc/current/contributing/code/core_team.html) et la [communaut√©](https://symfony.com/contributors)
                * Un framework full-stack (50 packages)
                * Des packages stand-alones : 36 composants, 6 bundles et 5 bridges
                * Des outils externes au framework comme Flex et Webpack Encore
                * Vous ! ‚ò∫

    sf4_fake:
        content: '# Symfony 4.0'

    sf4_fake_thanks:
        sections:
            - type: raw
              content: |

                <h1>Merci !</h1>
                <br>
                <br>
                <br>
                <code>@pierstoval</code>
                <br>
                <br>
                <br>
            - is_fragment: true
              content: |
                Je plaisante üòâ. On continue &rarr;

    start_summary:
        title: 'R√©sum√©'
        sections:
            - content: |
                | Version | _Features_ | Sortie | Fin de maintenance | Fin de vie |
                | :---: | :---: | :---: | :---: | :---: |
                | 3.0 | 0 | 11/2015 | 07/2016 | 01/2017 |
                | 3.1 | 131 | 05/2016 | 01/2017 | 07/2017 |
                | 3.2 | 66 | 11/2016 | 07/2017 | 01/2018 |
                | 3.3 | 267 | 05/2017 | 01/2018 | 07/2018 |
                | 3.4 | 215 | 11/2017 | 11/2020 | 11/2021 |
                | 4.0 | 0 | 11/2017 | 07/2018 | 01/2019 |
        notes: |
            _"Features"_ concerne aussi les d√©pr√©ciations.

    start_3.1:
        content: '# Symfony 3.1'
        notes: |
            16 slides

            | Version | _Features_ | Sortie | Fin de maintenance | Fin de vie |
            | :---: | :---: | :---: | :---: | :---: |
            | 3.1 | 131 | 05/2016 | 01/2017 | 07/2017 |

    3-1-strict-image:
        title: '3.1: Validation d''image stricte'
        sections:
            - type: code
              content: |
                use Symfony\Component\Validator\Constraints as Assert;

                class Product
                {
                    /**
                     * @Assert\Image(
                     *     detectCorrupted = true,
                     *     corruptedMessage = "Product photo is corrupted. Upload it again."
                     * )
                     */
                    protected $photo;
                }
            - type: quote
              quote_source: https://symfony.com/blog/new-in-symfony-3-1-strict-image-validation
        notes: |
            Utilise `@imagecreatefromstring(file_get_contents($imageFile));`

            Si `$resource === false`, la contrainte √©choue.

    3-1-column-width-console:
        title: '3.1: Taille des colonnes dans les tableaux en console'
        sections:
            - type: code
              content: |
                  use Symfony\Component\Console\Helper\Table;

                  $table = new Table($output);
                  $table
                      ->setHeaders(...)
                      ->setRows(array(...))
                      ->setColumnWidth(0, 15)
                      ->setColumnWidth(3, 10)
                  ;
                  $table->render();
            - type: quote
              quote_source: https://symfony.com/blog/new-in-symfony-3-1-explicit-column-widths-in-console-tables
        notes: |
            Avant : la largeur √©tait calcul√©e automatiquement selon la valeur la plus "large".

            * 1e argument : num√©ro de colonne.
            * 2e argument : largeur.

    3-1-input-stream-process:
        title: '3.1: Flux d''entr√©e pour les Process'
        sections:
            - type: code
              htmlattr: >
                  style="width: 49%; float: left;"
              content: |
                  use Symfony\Component\Process\Process;
                  use Symfony\Component\Process\InputStream;

                  $input = new InputStream();
                  $input->write('the');

                  $process = new Process('my_script');
                  $process->setInput($input);
                  $process->start();

                  $input->write('awesome');
                  $input->write('conference');
                  $input->close();
            - type: code
              htmlattr: >
                  style="width: 49%; float: right;"
              content: |
                  use Symfony\Component\Process\Process;

                  $process = new Process('cat');
                  $process->setInput('file.txt');
                  $process->run();
            - htmlattr: >
                  style="clear:both;"
            - type: quote
              quote_source: https://symfony.com/blog/new-in-symfony-3-1-input-and-output-stream-for-processes
        notes: |
            Avant, on ne pouvait le faire qu'avec qu'une cha√Æne de caract√®res, que ce soit dans le constructeur ou dans
            la m√©thode `setInput($input)`

    3-1-output-stream-process:
        title: '3.1: Flux de sortie pour les Process'
        sections:
            - type: code
              content: |
                  use Symfony\Component\Process\Process;

                  $process = new Process('ls -lsa');
                  $process->start();

                  foreach ($process as $type => $data) {
                      if ($type === Process::OUT) {
                          echo $data."\n";
                      } elseif ($type === Process::ERR) {
                          echo "[ERR] ".$data."\n";
                      }
                  }
            - type: quote
              quote_source: https://symfony.com/blog/new-in-symfony-3-1-input-and-output-stream-for-processes
        notes: |
            Avant, on ne pouvait le faire qu'avec qu'une callback.

            D√©sormais, `Process` impl√©mente `IteratorAggregate`, et l'iterator renvoy√© renvoie un g√©n√©rateur (PHP5.5)
            qui r√©cup√®re le flux de sortie √† chaque it√©ration.

    3-1-wtd_and_toolbar:
        title: '3.1: Am√©liorations de la _debug toolbar_ et du _profiler_'
        title_htmlattr: data-markdown
        sections:
            - content: |
                  * Affichage des erreurs "silencieuses" dans un onglet √† part.
                  * Recherche d'un profil par code HTTP.
                  * Un contexte plus verbeux est ajout√© dans certaines instructions dans les logs.
                  * Affiche le code de r√©ponse HTTP pour les requ√™tes AJAX.
            - type: quote
              quote_source: https://symfony.com/blog/new-in-symfony-3-1-web-debug-toolbar-and-profiler-enhancements
        notes: |
            Les erreurs silencieuses sont celles qui sont mises en sourdine avec un `@`.

    3-1-data_uri_normalizer:
        title: '3.1: Data URI Normalizer'
        sections:
            - type: code
              content: |
                  use Symfony\Component\Serializer\Normalizer\DataUriNormalizer;

                  $normalizer = new DataUriNormalizer();

                  $avatar = $normalizer->normalize(new \SplFileObject('avatar.gif'));
                  // $avatar = 'data:image/gif;base64,R0lGODdhAQABAIAAAP///////ywAAAAAAQABAAACAkQBADs=';

                  $avatar = $normalizer->denormalize('data:image/gif;base64,R0lGODdhAQABAIAAAP///////ywAAAAAAQABAAACAkQBADs=', 'SplFileObject');
                  // $avatar is a SplFileObject with the GIF image contents
            - type: quote
              quote_source: https://symfony.com/blog/new-in-symfony-3-1-data-uri-normalizer
        notes: |
            Pour des fichiers texte, utilise la fonction `rawurlencode()`, sinon `base64_encode()`.

            La d√©normalisation utilise une regex tr√®s complexe.

            Tr√®s utile pour pouvoir envoyer ces donn√©es √† des applications Javascript qui peuvent lire les fichiers avec
            des m√©thodes comme `FileReader.readAsDataUrl()`.

    3-1-network_mocking_and_dns_sensitive_tests:
        title: '3.1: _Mocks_ pour les tests li√©s au r√©seau ou √† des DNS'
        title_htmlattr: data-markdown
        sections:
            - type: code
              content: |
                  /** @group dns-sensitive */
                  public function testEmails()
                  {
                      DnsMock::withMockedHosts([ 'example.com' => [
                          ['type' => 'MX'],
                          // ['type' => 'A', 'ip' => '1.2.3.4'],
                          // ['type' => 'AAAA', 'ipv6' => '::12'],
                      ]]);

                      $constraint = new \Symfony\Component\Validator\Constraints\Email(['checkMX' => true]);

                      $result = $this->createValidator()->validate('foo@example.com', $constraint);
                  }
            - type: quote
              quote_source: https://symfony.com/blog/new-in-symfony-3-1-network-mocking-and-dns-sensitive-tests
        notes: |
            L'annotation `@group dns-sensitive` est indispensable.

            Utilise le composant `PHPUnitBridge`.

    3-1-improved-the-security-profiler-panel:
        title: '3.1: Panneau _Security_ dans le profiler'
        title_htmlattr: data-markdown
        sections:
            - content: |
                  * Rajoute les infos de l'utilisateur connect√© (nom, token...).
                  * Log des actions des _voters_.
            - type: quote
              quote_source: https://symfony.com/blog/new-in-symfony-3-1-improved-the-security-profiler-panel
        notes: |
            Tous les appels √† `is_granted` ou `->isGranted()` et √† l'`AccessDecisionManager` sont loggu√©s et affich√©s
            dans le profiler.

            L'objet pass√© en tant que "subject" est √©galement affich√©.

    3-1-datetime-normalizer:
        title: '3.1: DateTime Normalizer'
        sections:
            - type: code
              content: |
                  use Symfony\Component\Serializer\Normalizer\DateTimeNormalizer;
                  use Symfony\Component\Serializer\Serializer;

                  $serializer = new Serializer(array(new DateTimeNormalizer()));

                  $dateAsString = $serializer->normalize(new \DateTime('2016/01/01'));
                  // $dateAsString = '2016-01-01T00:00:00+00:00';

                  $dateAsObject = $serializer->denormalize('2016-01-01T00:00:00+00:00', \DateTime::class));
                  // $dateAsObject = class DateTime#1 (3) {
                  //   public $date => string(26) "2016-01-01 00:00:00.000000"
                  //   public $timezone_type => int(1)
                  //   public $timezone => string(6) "+00:00"
                  // }
            - type: quote
              quote_source: https://symfony.com/blog/new-in-symfony-3-1-datetime-normalizer
        notes: |
            On peut utiliser l'option de contexte `DateTimeNormalizer::FORMAT_KEY` pour sp√©cifier le format de
            normalisation/d√©normalisation.

            Par d√©faut, le format est celui de la RFC 3339, soit `Y-m-d\TH:i:sP`, comme montr√© dans l'exemple.

    3-1-deprecation-helper-improvements:
        title: '3.1: Am√©liorations du _Deprecations Helper_'
        title_htmlattr: data-markdown
        sections:
            - content: |
                  Cr√©ation de la variable d'environnement `SYMFONY_DEPRECATIONS_HELPER` :

                  * `disabled`, d√©sactive la gestion des d√©pr√©ciations.
                  * Une regex de type `/Passing callable strings .*|Passing a boolean flag .*/`
                  * Un nombre maximum de d√©pr√©ciations avant de consid√©rer la suite comme √©chou√©e.
                  * `weak`, ne fait pas √©chouer la suite de tests s'il y a des d√©pr√©ciations.
                  * `weak_vendors`, comme `weak` mais uniquement pour les d√©pr√©ciations venant des vendors.
            - type: quote
              quote_source: https://symfony.com/blog/new-in-symfony-3-1-deprecation-helper-improvements
        notes: |
            Lorsqu'on utilise une regex, le helper va stopper les tests, pour faciliter la d√©couverte de ce test.

    3-1-frameworkbundle-improvements:
        title: '3.1: Am√©liorations du `FrameworkBundle`'
        title_htmlattr: data-markdown
        sections:
            - content: |
                  * Les `FormType` du framework d√©finis en tant que services sont d√©pr√©ci√©s.
                  * Rajout√© une m√©thode `json()` dans le contr√¥leur de base:
                    ```
                    public function indexAction()
                    {
                        // Avant
                        return new JsonResponse($data);

                        // Apr√®s
                        return $this->json($data);
                    }
                    ```
            - type: quote
              quote_source: https://symfony.com/blog/new-in-symfony-3-1-frameworkbundle-improvements
        notes: |
            Pour les forms, cela ne concerne que ceux du framework. C'est pour migrer les services "alias√©s" vers
            l'utilisation du FQCN.

            La m√©thode `json()` accepte aussi les codes HTTP et les en-t√™tes de r√©ponse.

    3-1-forwards-and-redirects-in-the-toolbar-and-profiler:
        title: '3.1: Am√©liorations de la _debug toolbar_ et du _profiler_'
        title_htmlattr: data-markdown
        sections:
            - content: |
                  * Les redirections et les `forward` sont visibles dans la toolbar et dans le profiler.
                  * Les sous-requ√™tes sont d√©sormais affich√©es dans un onglet d√©di√© du profiler.
            - type: quote
              quote_source: https://symfony.com/blog/new-in-symfony-3-1-forwards-and-redirects-in-the-toolbar-and-profiler

    3-1-yaml-deprecations:
        title: '3.1: D√©pr√©ciations YAML'
        sections:
            - type: code
              code_language: yaml
              content: |
                  parameters:
                      # Avant
                      my_object: '!!php/object:O:27:"AppBundle\Service\MyService":1:{s:1:"b";s:3:"foo";}'
                      # Apr√®s
                      my_object: '!php/object:O:27:"AppBundle\Service\MyService":1:{s:1:"b";s:3:"foo";}'
            - type: code
              htmlattr: >
                  style="width: 47%; float: left;margin-left: 50px;"
              content: |
                  use Symfony\Component\Yaml\Dumper;

                  // Avant
                  $yaml = new Dumper();
                  $yaml->setIndentation(4);

                  // Apr√®s
                  $yaml = new Dumper(4);
            - type: code
              code_language: yaml
              htmlattr: >
                  style="width: 47%; float: right;margin-right: 50px;"
              content: |
                  # Avant
                  framework:
                      secret:       %secret%
                      router:
                          resource: %kernel.root_dir%/config/routing.yml
                  # Apr√®s
                  framework:
                      secret:       '%secret%'
                      router:
                          resource: '%kernel.root_dir%/config/routing.yml'
            - htmlattr: >
                  style="clear:both;"
            - type: quote
              quote_source: https://symfony.com/blog/new-in-symfony-3-1-yaml-deprecations

    3-1-customizable-yaml-parsing-and-dumping:
        title: '3.1: Configuration du composant Yaml'
        sections:
            - content: |
                  Introduction de flags de configuration.

            - htmlattr: 'style="width: 49%; float: left;"'
              content: |
                  Dumper :

                  * `Yaml::DUMP_OBJECT`
                  * `Yaml::DUMP_EXCEPTION_ON_INVALID_TYPE`
                  * `Yaml::DUMP_OBJECT_AS_MAP`
                  * `Yaml::DUMP_MULTI_LINE_LITERAL_BLOCK`

            - htmlattr: 'style="width: 49%; float: right;"'
              content: |
                  Parser :

                  * `Yaml::PARSE_EXCEPTION_ON_INVALID_TYPE`
                  * `Yaml::PARSE_OBJECT`
                  * `Yaml::PARSE_OBJECT_FOR_MAP`
                  * `Yaml::PARSE_DATETIME`

            - htmlattr: 'style="clear:both;"'
            - type: quote
              quote_source: https://symfony.com/blog/new-in-symfony-3-1-customizable-yaml-parsing-and-dumping

    3-1-cache-component:
        title: '3.1: Composant Cache PSR-6'
        sections:
            - type: code
              content: |
                  // filesystem, apcu, redis, array, doctrine cache, etc.
                  $cache = new Symfony\Component\Cache\Adapter\FilesystemAdapter();

                  $numProducts = $cache->getItem('stats.num_products');
                  $numProducts->set(4711);
                  $cache->save($numProducts);

                  $numProducts = $cache->getItem('stats.num_products');
                  if (!$numProducts->isHit()) {
                      // Doesn't exist in the cache!
                  }
                  $total = $numProducts->get();

                  $cache->deleteItem('stats.num_products');
            - type: quote
              quote_source: https://symfony.com/blog/new-in-symfony-3-1-cache-component
        notes: |
            Les items sont toujours des instances de `Symfony\Component\Cache\CacheItem` m√™me quand ils sont absents
            du cache.

            Le cache respecte PSR-6 et plein de composants l'utilisent (Serializer, Validator...)

    3-1-misc:
        title: '3.1: Autres'
        sections:
            - content: |
                  * Am√©lioration du composant Ldap
                  * Am√©lioration des traductions au format XLIFF
                  * Optimisations des composants DoctrineBridge, Serializer, Process
                  * Cr√©ation de l'event `kernel.controller_arguments`
                  * D√©pr√©ciation de `AbstractFormLoginAuthenticator::onAuthenticationSuccess()`
                  * D√©pr√©ciation des chemins de templates absolus
                  * D√©pr√©ciation de `choices_as_values` dans les `FormType`
        notes: |
            Pour `AbstractFormLoginAuthenticator::onAuthenticationSuccess`, il faut d√©sormais l'impl√©menter soi-m√™me et
            utilise le `TargetPathTrait`, cr√©√© pour l'occasion.

    start_3.2:
        content: '# Symfony 3.2'
        notes: |
            28 slides

            | Version | _Features_ | Sortie | Fin de maintenance | Fin de vie |
            | :---: | :---: | :---: | :---: | :---: |
            | 3.2 | 66 | 11/2016 | 07/2017 | 01/2018 |

    3-2-file-controller-helper:
        title: '3.2: M√©thode `->file()` dans le contr√¥leur'
        title_htmlattr: data-markdown
        sections:
            - type: code
              content: |
                  public function downloadAction()
                  {
                      $file = new \SplFileInfo('/var/tmp/processed_file');
                      // Avant
                      $response = new BinaryFileResponse($file);
                      $response->setContentDisposition(ResponseHeaderBag::DISPOSITION_ATTACHMENT, 'new_filename.pdf');

                      // Apr√®s
                      return $this->file($file, 'new_filename.pdf');
                  }
            - type: quote
              quote_source: https://symfony.com/blog/new-in-symfony-3-2-file-controller-helper

    3-2-yaml-deprecations:
        title: '3.2: D√©pr√©ciations YAML'
        sections:
            - content: |
                  Espaces manquants apr√®s `:`
            - type: code
              code_language: yaml
              content: |
                  # Avant
                  foo:bar
                  default_page:1

                  # Apr√®s
                  foo: bar
                  default_page: 1
            - content: |
                  Cl√©s dupliqu√©es
            - type: code
              code_language: yaml
              content: |
                  # Avant
                  foo: bar
                  foo: baz
                  # R√©solu comme ['foo' => 'bar'] ("baz" √©tait ignor√©)
            - type: quote
              quote_source: https://symfony.com/blog/new-in-symfony-3-2-yaml-deprecations
        notes: |
            Pour les cl√©s dupliqu√©es, c'est la premi√®re cl√© trouv√©e qui √©tait utilis√©e, toute cl√© dupliqu√©e plus tard
            √©tait ignor√©e.<br>
            Cependant, on peut dupliquer des cl√©s dans plusieurs fichiers de config Symfony, parce que chaque fichier
            est ind√©pendamment charg√© par le `YamlFileLoader` du composant DI.

    3-2-php-constants-in-yaml-files:
        title: '3.2: Constantes PHP dans les fichiers YAML'
        sections:
            - type: code
              code_language: yaml
              content: |
                  parameters:
                      # Resolved as a simple int
                      foo: PHP_INT_MAX

                      #¬†Resolved as the PHP constant's value
                      bar: !php/const:PHP_INT_MAX
            - type: quote
              quote_source: https://symfony.com/blog/new-in-symfony-3-2-php-constants-in-yaml-files
        notes: |
            Si on utilise le composant de fa√ßon standalone, il faut rajouter le flag `Yaml::PARSE_CONSTANT` au parser.

    3-2-better-readability-for-yaml-numeric-literals:
        title: '3.2: Meilleure lisibilit√© pour les nombres en Yaml'
        sections:
            - type: code
              code_language: yaml
              content: |
                  # Avant
                  parameters:
                      credit_card_number: 1234567890123456
                      long_number: 10000000000
                      pi: 3.141592653589793
                      hex_words: 0xCAFEF00D

                  #¬†Apr√®s
                  parameters:
                      credit_card_number: 1234_5678_9012_3456
                      long_number: 10_000_000_000
                      pi: 3.14159_26535_89793
                      hex_words: 0x_CAFE_F00D
            - type: quote
              quote_source: https://symfony.com/blog/new-in-symfony-3-2-better-readability-for-yaml-numeric-literals
        notes: |
            Chacune des valeurs pr√©sent√©es sera pars√©e comme un nombre.

            C'est dans la spec de Yaml et d√©j√† utilis√© dans les langages Java, Ruby, Rust, Swift...

            Par contre, c'est uniquement avec des `_`. Les `,` sont d√©sormais d√©pr√©ci√©es et seront bient√¥t pars√©es
            comme de simples cha√Ænes de caract√®res.

            Si on veut √©chapper le `_`, il suffit d'utiliser des guillemets simples ou doubles pour que ce soit trait√©
            comme une cha√Æne de caract√®res.

    3-2-compiler-passes-improvements:
        title: '3.2: Am√©lioration des passes de compilation'
        sections:
            - content: |
                  Ajout√© une priorit√© :
            - type: code
              content: |
                  public function addCompilerPass(CompilerPassInterface $pass, $type = PassConfig::TYPE_BEFORE_OPTIMIZATION, int $priority = 0);
            - content: |
                  Tri des services tagu√©s par un champ `priority` :
            - type: code
              code_language: yaml
              htmlattr: >
                  style="width: 37%; float: left;"
              content: |
                  services:
                      App\Test\MonthlyTest:
                          tags:
                              - { name: app.test, priority: 2 }
                      App\Test\DailyTest:
                          tags:
                              - { name: app.test, priority: 1 }
            - type: code
              htmlattr: >
                  style="width: 63%; float: right;"
              content: |
                  class CustomPass implements CompilerPassInterface
                  {
                      use PriorityTaggedServiceTrait;

                      public function process(ContainerBuilder $container)
                      {
                          $tests = $this->findAndSortTaggedServices('app.test', $container);

                          // ...
                      }
                  }
            - htmlattr: 'style="clear: both;"'
            - type: quote
              quote_source: https://symfony.com/blog/new-in-symfony-3-2-compiler-passes-improvements
        notes: |
            Chiffre plus √©lev√© = plus haut dans la liste.

    3-2-dateinterval-form-type:
        title: '3.2: `DateIntervalType`'
        title_htmlattr: data-markdown
        sections:
            - type: code
              content: |
                  $builder
                      ->add('remindEvery', DateIntervalType::class)
                  ;

            - type: quote
              quote_source: https://symfony.com/blog/new-in-symfony-3-2-dateinterval-form-type
        notes: |
            On peut sp√©cifier si on veut les ann√©es/mois/heures.

            On peut changer l'input pour un choice/text/integer/single_text.

            On peut choisir le type de valeur de retour : un objet DateInterval, une cha√Æne de caract√®res ISO (de type
            `P7Y6M5DT12H15M30S`) , ou un tableau avec des cl√©s type "days", "hours", etc.

            Le format d'intervalle est ISO 8601.

    3-2-tagged-cache:
        title: '3.2: Tags dans le cache'
        sections:
            - type: code
              content: |

                  $review = $cacheAdapter->getItem('reviews-'.$reviewId);

                  $review->set('...');

                  $review->tag(['reviews', 'products', 'product-'.$productId]);

                  $cache->invalidateTags('products');

                  $cache->invalidateTags('product-123');

                  $cache->invalidateTags(['products', 'reviews']);

            - type: quote
              quote_source: https://symfony.com/blog/new-in-symfony-3-2-tagged-cache
        notes: |
            C'est un exemple dans un e-commerce avec des reviews de produits.

            Une fois le cache invalid√©, la m√©thode `->isHit()` d'un nouveau `CacheItem` r√©cup√©r√© renverra `false`.

    3-2-console-improvements-part-1:
        title: '3.2: Alias de commandes'
        sections:
            - content: |
                  Les alias ne sont plus affich√©s comme des commandes √† part enti√®re.
            - type: code
              code_language: shell
              content: |
                  $ bin/console list


                  # Avant
                  Available commands:
                      foo                      Lorem Ipsum...  (ceci est un alias...)
                    app:
                      app:very:long:name       Lorem Ipsum...


                  # Apr√®s
                  Available commands:
                    app:
                      app:very:long:name       [foo] Lorem Ipsum...
            - type: quote
              quote_source: https://symfony.com/blog/new-in-symfony-3-2-console-improvements-part-1

    3-2-console-improvements-part-1-2:
        title: '3.2: Am√©liorations de la console'
        sections:
            - content: |
                  * M√™me avec l'option `-q`, les erreurs s'affichent d√©sormais.
                  * Nouveau param√®tre dans `Application::setDefaultCommand('name', true)` pour les applications mono-commandes.
                  * Une interface `StreamableInputInterface` pour faciliter le flux d'entr√©e en console.
                  * Un trait `LockableTrait` pour lock une ex√©cution.
                  * Commandes masqu√©es dans `bin/console list`.
            - htmlattr: 'style="font-size: 0.6em;text-align: right;margin-right: 50px;"'
              content: |
                Sources:

                * https://symfony.com/blog/new-in-symfony-3-2-console-improvements-part-1
                * https://symfony.com/blog/new-in-symfony-3-2-console-improvements-part-2
                * https://symfony.com/blog/new-in-symfony-3-2-console-improvements-part-3
        notes: |
            L'interface `StreamableInputInterface` est notamment utilis√©e pour le QuestionHelper

            Le trait `LockableTrait` est am√©lior√© en 3.4 gr√¢ce au composant Lock.

            M√©thode `->setHidden(true)` dans la m√©thode `configure()` des commandes.

    3-2-console-improvements-part-1-3:
        title: '3.2: Am√©liorations du `CommandTester`'
        title_htmlattr: data-markdown
        sections:
            - type: code
              code_language: php
              htmlattr: >
                  style="width: 55%; float: left;"
              content: |
                  // Avant

                  use Symfony\Component\Console\Tester\CommandTester;

                  $commandTester = new CommandTester($command);
                  $helper = $command->getHelper('question');
                  $helper->setInputStream($this->getInputStream("123\nfoo\nbar\n"));

                  protected function getInputStream($input)
                  {
                      $stream = fopen('php://memory', 'r+', false);
                      fputs($stream, $input);
                      rewind($stream);
                      return $stream;
                  }

            - type: code
              htmlattr: >
                  style="width: 45%; float: right;"
              content: |
                  // Apr√®s

                  use Symfony\Component\Console\Tester\CommandTester;

                  $commandTester = new CommandTester($command);
                  $commandTester->setInputs(['123', 'foo', 'bar'])
            - htmlattr: 'style="clear:both;"'
            - type: quote
              quote_source: https://symfony.com/blog/new-in-symfony-3-2-console-improvements-part-1

    3-2-console-improvements-part-2:
        title: '3.2: Console : la phase `Terminal`'
        title_htmlattr: data-markdown
        sections:
            - type: code
              content: |
                  class Terminal
                  {
                      public function getWidth();
                      public function getHeight();
                  }
            - type: quote
              quote_source: https://symfony.com/blog/new-in-symfony-3-2-console-improvements-part-2
        notes: |
            En plus de √ßa, utilise les variables d'env `COLUMNS` et `LINES` d√©finies par certains terminaux, et est
            compatible avec ANSICON (outil pour Windows).

            Tr√®s utile pour les progress-bar.

    3-2-console-improvements-part-3:
        title: >
            3.2:
            <span style="color:#ff0000;">D</span>
            <span style="color:#ff1900;">e</span>
            <span style="color:#ff3300;">s</span>
            <span style="color:#ff4c00;">‚ñà</span>
            <span style="color:#ff6600;">c</span>
            <span style="color:#ff7f00;">o</span>
            <span style="color:#ff9f00;">u</span>
            <span style="color:#ffbf00;">l</span>
            <span style="color:#ffdf00;">e</span>
            <span style="color:#ffff00;">u</span>
            <span style="color:#ccff00;">r</span>
            <span style="color:#99ff00;">s</span>
            <span style="color:#66ff00;">‚ñà</span>
            <span style="color:#33ff00;">e</span>
            <span style="color:#00ff00;">n</span>
            <span style="color:#00ff40;">‚ñà</span>
            <span style="color:#00ff80;">c</span>
            <span style="color:#00ffbf;">o</span>
            <span style="color:#00ffff;">n</span>
            <span style="color:#00ccff;">s</span>
            <span style="color:#0099ff;">o</span>
            <span style="color:#0066ff;">l</span>
            <span style="color:#0033ff;">e</span>
            <span style="color:#0000ff;">!</span>
        sections:
            - type: code
              content: |
                  $output->writeln('<fg=green;options=bold,underscore>Test</>');
            - type: quote
              quote_source: https://symfony.com/blog/new-in-symfony-3-2-console-improvements-part-3
        notes: |
            En r√©alit√© on pouvait d√©j√† le faire mais il fallait imbriquer plusieurs tags de style pour que √ßa fonctionne.

    3-2-lazy-loading-of-form-choices:
        title: '3.2: Chargement _lazy_ pour les `ChoiceType`'
        title_htmlattr: data-markdown
        sections:
            - type: code
              content: |
                  $builder->add('constants', ChoiceType::class, [
                      'choice_loader' => new CallbackChoiceLoader(function() {
                              return StaticClass::getConstants();
                      },
                  ]);

                  $builder->add('values_from_another_world', ChoiceType::class, [
                      'choice_loader' => new CallbackChoiceLoader(function() use ($externalService) {
                              return $externalService->fetchChoicesValues();
                      },
                  ]);
            - type: quote
              quote_source: https://symfony.com/blog/new-in-symfony-3-2-lazy-loading-of-form-choices
        notes: |
            Le `ChoiceType` √©tant utilis√© dans d'autres, cette feature est aussi dispo pour CountryType, CurrencyType,
            LanguageType, LocaleType et TimezoneType.

    3-2-user-value-resolver-for-controllers:
        title: '3.2: Injection de l''utilisateur dans les contr√¥leurs'
        sections:
            - type: code
              content: |
                  use Symfony\Bundle\FrameworkBundle\Controller\Controller;
                  use Symfony\Component\Security\Core\User\UserInterface;

                  class DefaultController extends Controller
                  {
                      // Quand l'utilisateur est obligatoire
                      public function fooAction(UserInterface $user) { ... }

                      // Quand l'utilisateur est facultatif (recommand√©, dans le doute)
                      public function barAction(UserInterface $user = null) { ... }
                  }
            - type: quote
              quote_source: https://symfony.com/blog/new-in-symfony-3-2-user-value-resolver-for-controllers
        notes: |
            Ne fonctionne qu'avec `UserInterface` du composant Security.

            Permet de ne plus avoir √† utiliser `$this->getUser()`.

            Attention : si vous utilisez les `service_arguments`, vous aurez un probl√®me si vous avez un seul utilisateur
            dans un provider de type `memory`.

            Dans certains cas, une simple annotation `@IsGranted()` ou `@Security()` suffit.

    3-2-httpfoundation-improvements:
        title: '3.2: Cookies `same-site`'
        title_htmlattr: data-markdown
        sections:
            - type: code
              content: |
                  $cookie = new Cookie(..., Cookie::SAMESITE_LAX);
                  $cookie = new Cookie(..., Cookie::SAMESITE_STRICT);
            - type: quote
              quote_source: https://symfony.com/blog/new-in-symfony-3-2-httpfoundation-improvements
        notes: |
            Fait partie de la RFC 6265 du 6 avril 2016 qui n'est pas encore accept√©e.

            Prot√®ge des attaques CSRF car permet aux applications de d√©sactiver les cookies qui n'auraient pas la m√™me
            origine.

            Le mode laxiste permet de prendre en compte certains cookies pour des requ√™tes GET, comme des clics de liens.

    3-2-httpfoundation-improvements-2:
        title: '3.2: En-t√™tes de cache corrig√©es'
        sections:
            - content: |
                  * Les r√©ponses de code 301 n'ajoutent plus automatiquement l'en-t√™te `no-cache`.
                  * Les r√©ponses avec l'en-t√™te `no-cache` se voient ajouter `private` si ce n'est pas pr√©cis√©.

            - type: quote
              quote_source: https://symfony.com/blog/new-in-symfony-3-2-httpfoundation-improvements
        notes: |
            Rappel : les 301 sont toujours mises en cache par le browser, m√™me en dev, donc on peut utiliser le
            param√®tre `intercept_redirects: false` du web profiler de Symfony au cas o√π.

    3-2-httpfoundation-improvements-3:
        title: '3.2: M√©thodes _idempotent_'
        title_htmlattr: data-markdown
        sections:
            - type: code
              content: |
                  $request->isMethodIdempotent();

            - type: quote
              quote_source: https://symfony.com/blog/new-in-symfony-3-2-httpfoundation-improvements
        notes: |
            M√©thodes HEAD, GET, PUT, DELETE, TRACE, OPTIONS, PURGE.

            M√©thode safe = m√©thode qui ne modifie pas la ressource (GET & HEAD).

            Idempotent = qui renvoie le m√™me r√©sultat apr√®s 2 requ√™tes identiques.

            Par ex:

            PUT est idempotent car la 2e requ√™te va remplacer la pr√©c√©dente, donc m√™me ressource.

            POST cr√©e une 2e ressource, donc pas idempotent.

    3-2-workflow-component:
        title: '3.2: Composant Workflow'
        sections:
            - type: raw
              content: |
                  <img class="noborder" src="{{ asset('img/workflow_states_transitions.png') }}">
            - type: quote
              quote_source: https://symfony.com/doc/current/components/workflow.html

    3-2-improved-private-services:
        title: '3.2: Services priv√©s am√©lior√©s'
        sections:
            - type: code
              code_language: yaml
              content: |
                  services:
                      app.manager.user:
                          class: AppBundle\Manager\User
                          public: false
            - type: quote
              quote_source: https://symfony.com/blog/new-in-symfony-3-2-improved-private-services
        notes: |
            * Service priv√© pas inject√© = supprim√© du container.
            * Si inject√© une seule fois = _inlin√©_
            * Si inject√© plusieurs fois = comme un service public.

            La version "pseudo-publique" est d√©pr√©ci√©e et sera supprim√©e en 4.0.

    3-2-filesystem-improvements:
        title: '3.2: Liens symboliques avec `Filesystem`'
        title_htmlattr: data-markdown
        sections:
            - type: code
              content: |
                  public function readlink($path, $canonicalize = false);
                  public function hardlink($originFile, string|array $targetFiles);

            - type: quote
              quote_source: https://symfony.com/blog/new-in-symfony-3-2-filesystem-improvements
        notes: |
            "canonicalize" √† true v√©rifie l'existence du fichier avant, et si le fichier final r√©solu existe.

            Sous windows, tout lien r√©solu va forc√©ment r√©soudre tous les liens jusqu'au fichier final.

            Sous mac & linux, cela r√©soud uniquement le "prochain" lien.

            `hardlink()` cr√©e un lien en dur qui pointe vers exactement le m√™me "inode" que le fichier, rendant le
            filesystem plus performant, et on peut du coup renommer le fichier cible sans casser le lien symbolique.

    3-2-runtime-environment-variables:
        title: '3.2: Runtime Environment Variables'
        sections:
            - type: code
              code_language: yaml
              content: |
                  parameters:
                      # Utilisation :
                      database_url: '%env(DATABASE_URL)%'

                      # Valeur par d√©faut si la variable d'env n'est pas d√©finie
                      env(DATABASE_URL): 'mysql://db_user:db_password@127.0.0.1:3306/db_name'
            - type: quote
              quote_source: https://symfony.com/blog/new-in-symfony-3-2-runtime-environment-variables
        notes: |
            Les variables d'env `SYMFONY__...` seront d√©pr√©ci√©es en 3.3, et en 3.3 on a aussi le composant Dotenv.

    3-2-csv-encoder-for-serializer:
        title: '3.2: Encodeur CSV dans le Serializer'
        sections:
            - type: code
              content: |
                  $data = [
                      'foo' => 'aaa',
                      'bar' => [
                          ['id' => 111, 1 => 'bbb'],
                          ['lorem' => 'ipsum'],
                      ]
                  ];

                  $csvString = $container->get('serializer')->encode($data, 'csv');
            - type: code
              code_language: csv
              content: |
                  foo,bar.0.id,bar.0.1,bar.1.lorem
                  aaa,111,bbb,ipsum
            - type: quote
              quote_source: https://symfony.com/blog/new-in-symfony-3-2-csv-and-yaml-encoders-for-serializer
        notes: |
            Utilise la fonction `fputcsv()` dans un stream.

    3-2-yaml-encoder-for-serializer:
        title: '3.2: Encodeur Yaml dans le Serializer'
        sections:
            - type: code
              content: |
                  $obj = new \stdClass();
                  $obj->bar = 2;

                  $yamlString = $this->container->get('serializer')->encode(
                      [
                          'foo' => $obj,
                          'bar' => 'Such wow',
                      ],
                      'yaml',
                      ['yaml_inline' => 1, 'yaml_indent' => 4, 'yaml_flags' => Yaml::DUMP_OBJECT]
                  );
            - type: code
              code_language: yaml
              content: |
                foo: !php/object 'O:8:"stdClass":1:{s:3:"bar";i:2;}'
                bar: 'Such wow'
            - type: quote
              quote_source: https://symfony.com/blog/new-in-symfony-3-2-csv-and-yaml-encoders-for-serializer

    3-2-cache-improvements:
        title: '3.2: Nouveaut√©s du Cache'
        sections:
            - content: |
                  * `Symfony\Component\Cache\Adapter\NullAdapter`
                  * `Symfony\Component\Cache\Adapter\PhpFilesAdapter`
                  * `Symfony\Component\Cache\Adapter\PdoAdapter`
                  * `Symfony\Component\Cache\Adapter\TagAwareAdapter`
                  * Commande `cache:pool:clear`
            - type: quote
              quote_source: https://symfony.com/blog/new-in-symfony-3-2-cache-improvements
        notes: |
            NullAdapter est surtout pour les tests.

            Le PhpFilesAdapter peut √™tre plus de 3 fois plus rapide que le FilesystemAdapter parce qu'il va pouvoir
            utiliser l'OPCache.

            Le PdoAdapter utilise Doctrine DBAL, on peut donc avoir du cache dans mysql, postgresql ou sqlite.

            Le TagAwareAdapter d√©core un autre Adapter pour lui permettre de g√©rer des tags de cache.

            La commande permet de vider le cache d'un service pr√©cis (ou d'un adapter pr√©cis).

    3-2-firewall-config-class-and-profiler:
        title: '3.2: Config du Firewall expos√©e'
        sections:
            - content: |
                  * `Symfony\Bundle\SecurityBundle\Security\FirewallConfig`
                  * La config du firewall est aussi affich√©e dans la debug toolbar & le profiler
            - type: quote
              quote_source: https://symfony.com/blog/new-in-symfony-3-2-firewall-config-class-and-profiler
        notes: |
            Permet d'appeler `getFirewallConfig(Request $request)` sur le service `FirewallMap` afin de r√©cup√©rer la
            configuration du firewall d√©tect√© durant l'event `kernel.request`.

    3-2-dx-improvements:
        title: '3.2: DX'
        sections:
            - content: |
                  * `$progress->advance()` permet les valeurs n√©gatives.
                  * `framework.ide: phpstorm` pour des liens de debug
                  * Constructeur statique `JsonResponse::fromJsonString($jsonString)`
            - type: quote
              quote_source: https://symfony.com/blog/new-in-symfony-3-2-dx-improvements

    3-2-misc-improvements:
        title: '3.2: Autres am√©liorations'
        sections:
            - content: |
                  * Moins de d√©pendances dans le FrameworkBundle
                  * Un _dumper_ AST pour ExpressionLanguage
                  * Perfs accrues avec un chargement s√©lectif pour les extensions Twig
            - type: quote
              quote_source: https://symfony.com/blog/new-in-symfony-3-2-misc-improvements
        notes: |
            Les extensions Twig ne sont pas toutes charg√©es si le composant associ√© n'est pas install√© via Composer.

    start_3.3:
        content: '# Symfony 3.3'
        notes: |
            23 slides

            | Version | _Features_ | Sortie | Fin de maintenance | Fin de vie |
            | :---: | :---: | :---: | :---: | :---: |
            | 3.3 | 267 | 05/2017 | 01/2018 | 07/2018 |

    3-3-optional-class-for-named-services:
        title: '3.3: FQCN pour le nom d''un service'
        sections:
            - type: code
              htmlattr: 'style="width: 49%; float: left;"'
              code_language: yaml
              content: |
                  services:
                      # Avant
                      app.manager.user:
                          class: AppBundle\EventListener\UserManager
                          tags:  ['kernel.event_subscriber']

                      # Apr√®s
                      AppBundle\EventListener\UserManager:
                          tags:  ['kernel.event_subscriber']
            - type: code
              htmlattr: 'style="width: 49%; float: right;"'
              content: |
                    // Avant
                    $this->get('app.manager.user')->save($user);

                    // Apr√®s
                    $this->get(UserManager::class)->save($user);
            - htmlattr: 'style="clear:both;"'
            - type: quote
              quote_source: https://symfony.com/blog/new-in-symfony-3-3-optional-class-for-named-services

    3-3-simpler-constructor-configuration:
        title: '3.3: Arguments de service'
        sections:
            - type: code
              code_language: yaml
              content: |
                  # Avant
                  services:
                      App\Foo\Bar:
                          arguments: ['@baz', 'foo', '%qux%']

                  # Apr√®s
                  services:
                      App\Foo\Bar: ['@baz', 'foo', '%qux%']

            - type: quote
              quote_source: https://symfony.com/blog/new-in-symfony-3-3-simpler-service-configuration

    3-3-simpler-auto-configuration:
        title: '3.3: Auto-configuration de services'
        sections:
            - type: code
              code_language: yaml
              content: |
                services:
                    _instanceof:
                        Symfony\Component\Console\Command\Command:
                            tags: ['console.command']
                            public: true

                        Twig_ExtensionInterface:
                            tags: ['twig.extension']

                        Symfony\Component\EventDispatcher\EventSubscriberInterface:
                            tags: ['kernel.event_subscriber']

                    App\EventListener\MyListener:
                        autoconfigure: true

            - type: quote
              quote_source: https://symfony.com/blog/new-in-symfony-3-3-service-autoconfiguration
        notes: |
            Les r√®gles sont d√©finies dans les extensions de bundles ou les compiler pass.

    3-3-simpler-services-configuration:
        title: '3.3: Config par d√©faut de services'
        sections:
            - type: code
              code_language: yaml
              content: |
                  services:
                      _defaults:
                          autowire: true
                          autoconfigure: true
                          public: false
            - type: quote
              quote_source: https://symfony.com/blog/new-in-symfony-3-3-simpler-service-configuration

    3-3-psr-4-based-service-discovery:
        title: '3.3: D√©couverte de services via PSR-4'
        sections:
            - type: code
              code_language: yaml
              content: |
                  services:
                      App\:
                          resource: ../src/{Command}
                      App\:
                          resource: ../src/{Controller}
                          public: true
            - type: quote
              quote_source: https://symfony.com/blog/new-in-symfony-3-3-psr-4-based-service-discovery

    3-3-weblink-component:
        title: '3.3: Composant WebLink'
        sections:
            - content: |
                  Nouvelles fonctions dans Twig :

                  * `link()`, rajoute un en-t√™te HTTP `Link`
                  * `preload()`, Link pour pr√©-charger une ressource d'apr√®s une URL
                  * `dns_prefetch()`, Link pour r√©soudre les DNS d'une ressource le plus t√¥t possible
                  * `preconnect()`, Link pour faire une connexion initiale avant de fetch d'autres ressources
                  * `prefetch()`, Link pour r√©cup√©rer une ressource optionelle, sans pr√©-processing
                  * `prerender()`, Link pour r√©cup√©rer une ressource & faire du pr√©-processing

                  Exemple :

            - type: code
              code_language: raw
              content: |
                  Link: </css/app.css>; rel=preload,</cjs/app.js>; rel=preload
            - type: quote
              quote_source: https://symfony.com/blog/new-in-symfony-3-3-weblink-component
        notes: |
            Relatif √† la RFC 5988 qui date d'Octobre 2010 et sa mise √† jour la RFC 8288 d'Octobre 2017.
            Li√© aux RFC de HTML 5.2 et de HTTP/2.

            `link` et `preload` n√©cessitent tous deux des param√®tres additionnels sur la fa√ßon de charger une ressource.
            (d'o√π le preconnect & prefetch...)

            `preconnect`: permet de faire un premier lookup DNS, un handshake TCP et une n√©gociation TLS pour pouvoir
            garder une connexion ouverte vers le serveur pour fetch d'autres ressources.

            `prefetch` charge une ressource facultative

            `prerender` va charger une ressource (genre "next page") et il peut √©ventuellement charger des ressources
            connexes, comme des scripts, assets, etc.

    3-3-redesigned-exception-pages:
        title: '3.3: Nouveau design des pages d''exceptions'
        sections:
            - content: |
                  ![Redesign exception]({{ asset('img/exceptions_redesign.jpg') }})
            - type: quote
              quote_source: https://symfony.com/blog/new-in-symfony-3-3-redesigned-exception-pages

    3-3-faster-routing:
        title: '3.3: Routing plus rapide'
        sections:
            - content: |
                  Avec 900 routes, on passe de 7.5ms √† 2.5ms.

                  De fa√ßon g√©n√©rale, c'est entre 30% et 340% plus rapide.
            - type: quote
              quote_source: https://symfony.com/blog/new-in-symfony-3-3-faster-routing

    3-3-a-simpler-way-to-get-the-project-root-directory:
        title: '3.3: A simpler way to get the project root directory'
        sections:
            - content: |
                  `%kernel.root_dir%` d√©sormait d√©suet : place √† `%kernel.project_dir%` !
            - type: quote
              quote_source: https://symfony.com/blog/new-in-symfony-3-3-a-simpler-way-to-get-the-project-root-directory
        notes: |
            Correspond au dossier dans lequel se situe votre fichier `composer.json`

    3-3-improved-flash-messages:
        title: '3.3: Messages flash'
        sections:
            - type: code
              code_language: twig
              content: |
                  {# Avant #}

                  {% for label, messages in app.session.flashbag.all %}{% endfor %}

                  {% for message in app.session.flashbag.get('notice') %}{% endfor %}



                  {# Apr√®s #}

                  {% for label, messages in app.flashes %}{% endfor %}

                  {% for message in app.flashes('notice') %}{% endfor %}
            - type: quote
              quote_source: https://symfony.com/blog/new-in-symfony-3-3-improved-flash-messages

    3-3-deprecated-the-special-symfony-environment-variables:
        title: '3.3: D√©pr√©ciation des variables d''environnement `SYMFONY__`'
        title_htmlattr: data-markdown
        sections:
            - content: |
                  Avant :

                  `SYMFONY__APP__CHARSET` d√©finit le param√®tre `%app.charset%`

                  Apr√®s :

                  On utilise des variables d'environnement üòâ
            - type: quote
              quote_source: https://symfony.com/blog/new-in-symfony-3-3-deprecated-the-special-symfony-environment-variables

    3-3-about-command:
        title: '3.3: Commande `about`'
        title_htmlattr: data-markdown
        sections:
            - type: terminal
              htmlattr: 'style="font-size: 0.8em;"'
              content: |
                  $ ./bin/console about

                   -------------------- ------------------------------------------
                    Symfony
                   -------------------- ------------------------------------------
                    Version              3.3.16
                    End of maintenance   01/2018 Expired
                    End of life          07/2018
                   -------------------- ------------------------------------------
                    Kernel
                   -------------------- ------------------------------------------
                    Type                 AppKernel
                    Name                 app
                    Environment          dev
                    Debug                true
                    Charset              UTF-8
                    Root directory       .\app
                    Cache directory      ./var/cache/dev (558 KiB)
                    Log directory        ./var/logs (0 B)
                   -------------------- ------------------------------------------
                    PHP
                   -------------------- ------------------------------------------
                    Version              7.2.2
                    Architecture         64 bits
                    Intl locale          fr_FR
                    Timezone             Europe/Paris (2018-02-21T21:20:23+01:00)
                    OPcache              true
                    APCu                 true
                    Xdebug               true
                   -------------------- ------------------------------------------
            - type: quote
              quote_source: https://symfony.com/blog/new-in-symfony-3-3-about-command

    3-3-manifest-based-asset-versioning:
        title: '3.3: Versioning d''assets avec un manifest'
        sections:
            - type: code
              code_language: json
              content: |
                  {
                      "css/app.css": "build/css/app.b916426ea1d10021f3f17ce8031f93c2.css",
                      "js/app.js": "build/js/app.13630905267b809161e71d0f8a0c017b.js"
                      "...": "..."
                  }
            - type: code
              code_language: yaml
              content: |
                  # app/config/config.yml
                  framework:
                      # ...
                      assets:
                          json_manifest_path: '%kernel.project_dir%/build/manifest.json'

            - type: quote
              quote_source: https://symfony.com/blog/new-in-symfony-3-3-manifest-based-asset-versioning
        notes: |
            Utilisable avec des g√©n√©rateurs de manifests comme certains plugins pour Webpack ou Gulp

    3-3-load-config-files-with-glob-patterns:
        title: '3.3: Recherches de fichiers de config "glob"'
        sections:
            - type: code
              content: |
                  protected function configureContainer(ContainerBuilder $container, LoaderInterface $loader)
                  {
                      $confDir = dirname($this->getRootDir()).'/etc';
                      $loader->import($confDir.'/packages/*.yaml', 'glob');
                      $loader->import($confDir.'/packages/'.$this->getEnvironment().'/**/*.yaml', 'glob');
                      $loader->import($confDir.'/container.yaml', 'glob');
                  }
            - type: code
              code_language: yaml
              content: |
                  imports:
                      - { resource: '../common/' }
                      - { resource: 'acme/*.yaml' }

            - htmlattr: 'style="font-size: 0.6em;text-align: right;margin-right: 50px;"'
              content: |
                Sources:

                * https://symfony.com/blog/new-in-symfony-3-3-load-config-files-with-glob-patterns
                * https://symfony.com/blog/new-in-symfony-3-3-import-config-files-with-glob-patterns

    3-3-kernel-build-method:
        title: '3.3: M√©thode `Kernel::build()`'
        title_htmlattr: data-markdown
        sections:
            - content: |
                  `Kernel::build()` fonctionne comme `Bundle::build()`
            - type: quote
              quote_source: https://symfony.com/blog/new-in-symfony-3-3-kernel-build-method

    3-3-psr-11-containers:
        title: '3.3: Conteneur PSR-11 & _service locators_'
        title_htmlattr: data-markdown
        sections:
            - type: code
              content: |
                  interface ContainerInterface
                  {
                      public function get($id);
                      public function has($id);
                  }
            - type: code
              code_language: yaml
              content: |
                services:
                    app.command_handler_locator:
                        class: Symfony\Component\DependencyInjection\ServiceLocator
                        tags: ['container.service_locator']
                        arguments:
                            -
                                AppBundle\FooCommand: '@app.command_handler.foo'
                                AppBundle\BarCommand: '@app.command_handler.bar'

                    AppBundle\CommandBus:
                        arguments: ['@app.command_handler_locator']

            - htmlattr: 'style="font-size: 0.6em;text-align: right;margin-right: 50px;"'
              content: |
                Sources:

                * https://symfony.com/blog/new-in-symfony-3-3-psr-11-containers
                * https://symfony.com/blog/new-in-symfony-3-3-service-locators
        notes: |
            C'est un pattern qui encapsule le processus d'obtention d'un service √† partir d'un registre : le service
            locator.

            Il y a aussi `ServiceSubscriberInterface::getSubscribedServices()`.

            Ce container est utilis√© pour le contr√¥leur de base.

    3-3-abstract-controller:
        title: '3.3: `AbstractController`'
        title_htmlattr: data-markdown
        sections:
            - content: |
                  `Symfony\Bundle\FrameworkBundle\Controller\Controller`

                  devient

                  `Symfony\Bundle\FrameworkBundle\Controller\AbstractController`
        notes: |
            Utilise un service locator, et pas `ContainerAwareInterface`.

    3-3-simple-cache:
        title: '3.3: Cache PSR-16 minimaliste'
        sections:
            - type: code
              content: |
                  use Symfony\Component\Cache\Simple\FilesystemCache;

                  $cache = new FilesystemCache();

                  $cache->set('stats.num_products', 4711); // Save

                  if (!$cache->has('stats.num_products')) { // Fetch
                      // ... item does not exist in the cache
                  } else {
                      $total = $cache->get('stats.num_products');
                  }

                  $cache->delete('stats.num_products');
            - type: quote
              quote_source: https://symfony.com/blog/new-in-symfony-3-3-simple-cache
        notes: |
            PSR-6 : Cache, gestion d'items, pools, etc.

            PSR-16 : _Common interface for caching libraries_, version simple

    3-3-dotenv-component:
        title: '3.3: Composant Dotenv'
        sections:
            - type: code
              code_language: bash
              content: |
                  # .env

                  DATABASE_URL="mysql://root@127.0.0.1/app_db?serverVersion=5.7"

            - type: code
              content: |
                  use Symfony\Component\Dotenv\Dotenv;

                  (new Dotenv())->load(__DIR__.'/.env');

                  $dbPassword = $_ENV['DATABASE_URL'];

            - type: quote
              quote_source: https://symfony.com/blog/new-in-symfony-3-3-dotenv-component

    3-3-webserverbundle:
        title: '3.3: WebServerBundle'
        sections:
            - content: |
                  Surtout pour DX et pour faciliter l'installation du bundle en dehors de `symfony/symfony`
            - type: quote
              quote_source: https://symfony.com/blog/new-in-symfony-3-3-webserverbundle

    3-3-cookie-improvements:
        title: '3.3: Cookie improvements'
        sections:
            - type: code
              content: |
                  // "max-age" attribute
                  $cookie = new Cookie('foo', 'bar', strtotime('now + 10 minutes'));

                  // "set" instead of using a Cookie object
                  $response->headers->set('set-cookie', 'foo=bar', false);

            - type: quote
              quote_source: https://symfony.com/blog/new-in-symfony-3-3-cookie-improvements
        notes: |
            "max-age" a une plus haute pr√©c√©dence que "expires".

            Et c'est un nombre de secondes, plus facile pour √©viter d'avoir √† adapter la timezone du serveur √† celle du
            client.

    3-3-added-new-shortcut-methods:
        title: '3.3: Quelques raccourcis DX'
        sections:
            - type: code
              content: |
                  // Avant
                  $container->register('app.twig_extension', AppExtension::class)
                      ->setAutowired(true)
                  ;

                  // Apr√®s
                  $container->autowire('app.twig_extension', AppExtension::class)
            - type: code
              content: |
                  $node = new ArrayNodeDefinition('name');

                  // Avant
                  $node->prototype('integer')->max(10);

                  // Apr√®s
                  $node->integerPrototype()->max(10);
            - type: code
              code_language: yaml
              content: |
                  services:
                      AppBundle\Twig\AppExtension
                          #¬†Avant
                          tags:
                              - { name: twig.extension }

                          #¬†Apr√®s
                          tags: ['twig.extension']
            - type: quote
              quote_source: https://symfony.com/blog/new-in-symfony-3-3-added-new-shortcut-methods
        notes: |
            Le `integerPrototype()` permet notamment de pouvoir utiliser l'auto-compl√©tion de l'IDE

    3-3-improved-the-profiler-configuration-panel:
        title: '3.3: Infos sur Symfony dans le _profiler_'
        title_htmlattr: data-markdown
        sections:
            - htmlattr: 'style="width: 50%; float: left;"'
              content: |
                  ![profiler upgrade]({{ asset('img/profiler_1.jpg') }})

            - htmlattr: 'style="width: 50%; text-align: center;float: right;"'
              content: |
                  ![profiler upgrade]({{ asset('img/profiler_2.jpg') }})

                  ![profiler upgrade]({{ asset('img/profiler_3.jpg') }})
            - htmlattr: 'style="clear:both;"'
            - type: quote
              quote_source: https://symfony.com/blog/new-in-symfony-3-3-improved-the-profiler-configuration-panel

    3-3-json-authentication:
        title: '3.3: Authentification JSON'
        sections:
            - type: code
              code_language: yaml
              content: |
                  security:
                      firewalls:
                          main:
                              json_login:
                                  check_path: /login
            - type: code
              code_language: raw
              content: |
                  GET /login HTTP/1.1
                  Host: localhost

                  { "username": "foo", "password": "bar1234" }
            - type: quote
              quote_source: https://symfony.com/blog/new-in-symfony-3-3-json-authentication

    start_3.4:
        content: '# Symfony 3.4 (LTS)'
        notes: |
            22 slides

            | Version | _Features_ | Sortie | Fin de maintenance | Fin de vie |
            | :---: | :---: | :---: | :---: | :---: |
            | 3.4 | 215 | 11/2017 | 11/2020 | 11/2021 |

    3-4-lock-component:
        title: '3.4: Composant Lock'
        sections:
            - type: code
              content: |
                $lock = $lockFactory->createLock('pdf-invoice-generation');

                if ($lock->acquire()) {
                    // Do stuff

                    $lock->release();
                }

            - type: code
              content: |
                $lock->isAcquired();
                $lock->refresh();
                $lock->release();


            - type: quote
              quote_source: https://symfony.com/blog/new-in-symfony-3-3-lock-component
        notes: |
            Fait suite au LockableTrait cr√©√© en 3.2 pour la console.

            Il avait √©t√© ajout√© en 3.3 mais rajout√© en 3.4 car il √©tait incomplet.

            LockFactory correspond au service `lock` dans le DIC.

            Il y a des adapters pour Redis, Memcached, Semaphore ou `flock()`.

    3-4-debug-autowiring-command:
        title: '3.4: Commande `debug:autowiring`'
        title_htmlattr: data-markdown
        sections:
            - type: code
              code_language: shell
              content: |
                  $ ./bin/console debug:autowiring

                  Autowirable Services
                  ====================

                  The following classes & interfaces can be used as type-hints when autowiring:

                    App\Command\AddUserCommand
                    App\Command\DeleteUserCommand
                    App\Command\ListUsersCommand
                    App\Controller\Admin\BlogController
                    App\Controller\BlogController
                    App\Controller\SecurityController
                    App\EventSubscriber\CheckRequirementsSubscriber
                    App\EventSubscriber\CommentNotificationSubscriber
            - type: quote
              quote_source: https://symfony.com/blog/new-in-symfony-3-4-debug-autowiring-command

    3-4-disable-global-form-themes:
        title: '3.4: D√©sactiver les form themes globaux'
        sections:
            - type: code
              code_language: twig
              content: |
                  {% form_theme form with ['common.html.twig', 'form/fields.html.twig'] only %}
            - type: quote
              quote_source: https://symfony.com/blog/new-in-symfony-3-4-disable-global-form-themes

    3-4-guard-authentication-improvements:
        title: '3.4: D√©pr√©ciations & am√©liorations du Guard'
        sections:
            - content: |
                  * D√©pr√©ciations de `GuardAuthenticatorInterface` au profit de `AuthenticatorInterface`.
                  * `getCredentials()` doit soit renvoyer des credentials, soit une exception.
                  * Ajout d'une m√©thode `supports()` pour compenser le changement de `getCredentials()`.
            - type: quote
              quote_source: https://symfony.com/blog/new-in-symfony-3-4-guard-authentication-improvements
        notes: |
            Avant avec `getCredentials()` on pouvait renvoyer `null`. D√©sormais il faut utiliser `supports()`

    3-4-debug-form-command:
        title: '3.4: Commande `debug:form`'
        title_htmlattr: data-markdown
        sections:
            - type: code
              code_language: shell
              htmlattr: 'style="font-size: 0.64393em;"'
              content: |
                  $ ./bin/console debug:form

                  Built-in form types (Symfony\Component\Form\Extension\Core\Type)
                  ----------------------------------------------------------------
                   BirthdayType, ButtonType, CheckboxType, ChoiceType, CollectionType
                   ...
                   TextareaType, TimeType, TimezoneType, UrlType

                  Service form types
                  ------------------
                   * App\Form\CommentType
                   * ...
                   * Symfony\Bridge\Doctrine\Form\Type\EntityType

                  Type extensions
                  ---------------
                   * Symfony\Component\Form\Extension\Csrf\Type\FormTypeCsrfExtension
                   * ...

                  Type guessers
                  -------------
                   * Symfony\Bridge\Doctrine\Form\DoctrineOrmTypeGuesser
                   * ...
            - type: quote
              quote_source: https://symfony.com/blog/new-in-symfony-3-4-debug-form-command

    3-4-local-service-binding:
        title: '3.4: _"Service bindings"_'
        title_htmlattr: data-markdown
        sections:
            - type: code
              htmlattr: 'style="width: 49%; float: left;"'
              code_language: yaml
              content: |
                  # Avant
                  services:
                      _defaults:
                          autowire: true
                          autoconfigure: true
                          public: false

                      App\Some\Service1:
                          $projectDir: '%kernel.project_dir%'

                      App\Some\Service2:
                          $projectDir: '%kernel.project_dir%'

                      App\Some\Service3:
                          $projectDir: '%kernel.project_dir%'

            - type: code
              htmlattr: 'style="width: 49%; float: left;"'
              code_language: yaml
              content: |
                  # Apr√®s
                  services:
                      _defaults:
                          autowire: true
                          autoconfigure: true
                          public: false
                          bind:
                              $projectDir: '%kernel.project_dir%'

                      App\Some\Service1: ~
                      App\Some\Service2: ~
                      App\Some\Service3: ~
            - htmlattr: 'style="clear:both;"'
            - type: quote
              quote_source: https://symfony.com/blog/new-in-symfony-3-4-local-service-binding

    3-4-services-are-private-by-default:
        title: '3.4: Services priv√©s par d√©faut'
        sections:
            - type: quote
              quote_source: https://symfony.com/blog/new-in-symfony-3-4-services-are-private-by-default
        notes: |
            Services publics obligatoires pour les contr√¥leurs et uniquement dans certains rares cas, comme le
            _"bootstrapping"_ de l'appli.

    3-4-minimalist-psr-3-logger:
        title: '3.4: Logs PSR-3 int√©gr√©s au framework'
        sections:
            - content: |
                  * Logger minimaliste, toujours dispo, avec le nom de service `logger`.
                  * Pas besoin d'installer d'autre lib de logs.
                  * Autowiring possible via `Psr\Log\LoggerInterface`.
                  * √âcrit sur `php://stderr` par d√©faut.
                  * `level: warning` par d√©faut.
                  * M√™me API que Monolog
            - type: quote
              quote_source: https://symfony.com/blog/new-in-symfony-3-4-minimalist-psr-3-logger

    3-4-improved-the-overriding-of-templates:
        title: '3.4: Surcharge de templates de bundles'
        sections:
            - content: |
                  Avant :

                  `app/Resources/TwigBundle/views/Exception/error404.html.twig`

                  Apr√®s :

                  `templates/bundles/TwigBundle/Exception/error404.html.twig`

                  Rajout de `@!` pour forcer l'utilisation du template original non surcharg√© :

                  `{Ôªø% extends '@!EasyAdmin/layout.html.twig' %Ôªø}`
            - type: quote
              quote_source: https://symfony.com/blog/new-in-symfony-3-4-improved-the-overriding-of-templates

    3-4-simpler-injection-of-tagged-services:
        title: '3.4: Injection de services tagu√©s'
        sections:
            - type: code
              code_language: yaml
              content: |
                  services:
                      App\Manager\TwigManager:
                          arguments: [!tagged twig.extension]
            - type: code
              content: |
                  namespace App\Manager;

                  class TwigManager
                  {
                      public function __construct(iterable $twigExtensions)
                      {
                          // ...
                      }
                  }
            - type: quote
              quote_source: https://symfony.com/blog/new-in-symfony-3-4-simpler-injection-of-tagged-services
        notes: |
            `iterable` n√©cessite PHP 7.1

    3-4-defining-compiler-passes-in-the-kernel:
        title: '3.4: Auto-configuration du Kernel'
        sections:
            - content: |
                  Permet au kernel d'impl√©menter `EventSubscriberInterface` et `CompilerPassInterface`.
            - htmlattr: 'style="font-size: 0.6em;text-align: right;margin-right: 50px;"'
              content: |
                Sources:

                * https://symfony.com/blog/new-in-symfony-3-4-simpler-injection-of-tagged-services
                * https://symfony.com/blog/new-in-symfony-3-4-subscribing-to-events-in-the-micro-kernel

    3-4-bootstrap-4-form-theme:
        title: '3.4: Form theme pour Bootstrap 4'
        sections:
            - content: |
                  ![Bootstrap form]({{ asset('img/bootstrap_form.jpg') }})
            - type: quote
              quote_source: https://symfony.com/blog/new-in-symfony-3-4-bootstrap-4-form-theme
        notes: |
            Un th√®me pour Bootstrap 3 √©tait d√©j√† dispo.

    3-4-argon2i-password-hasher:
        title: '3.4: Encoder Argon2i'
        sections:
            - type: code
              code_language: yaml
              content: |
                  security:
                      encoders:
                          Symfony\Component\Security\Core\User\User:
                              algorithm: 'argon2i'
            - type: quote
              quote_source: https://symfony.com/blog/new-in-symfony-3-4-argon2i-password-hasher
        notes: |
            Pour les versions ant√©rieures √† PHP 7.2 il faudra installer `paragonie/sodium_compat` via Composer ou
            `libsodium` via pecl.

    3-4-default-request-context-for-assets:
        title: '3.4: Contexte de requ√™te pour les assets'
        sections:
            - type: code
              code_language: yaml
              content: |
                  asset.request_context.base_path: '/subfolder'
                  asset.request_context.secure: true
            - type: code
              code_language: twig
              content: |
                  {{ asset('/foo/image.jpg') }}
                  {# /subfolder/foo/image.jpg #}
            - type: quote
              quote_source: https://symfony.com/blog/new-in-symfony-3-4-default-request-context-for-assets
        notes: |
            Pour le routing on a d√©j√† quelque chose de similaire `router.request_context.base_url: 'http://localhost'`.

    3-4-deprecated-bundle-inheritance:
        title: '3.4: D√©pr√©ciation de l''h√©ritage de bundles'
        sections:
            - type: quote
              quote_source: https://symfony.com/blog/new-in-symfony-3-4-deprecated-bundle-inheritance
        notes: |
            Surcharges :

            * Controllers: D√©finir une route avec le m√™me nom.
            * Templates: Utiliser nouveau syst√®me d'h√©ritage.
            * Routing: Ne pas charger les routes du bundle.
            * Services and Configuration: Utiliser un compiler pass ou _service decorator_.
            * Entities: Pas possible, sauf si le bundle utilise une "mapped superclass.
            * Forms: Utiliser extensions de forms.
            * Validation: Pas possible, sauf si validation groups.
            * Translations: Surcharger les domaines de traduction.

    3-4-php-based-configuration-for-services:
        title: '3.4: Config PHP _fluent_ pour les services'
        title_htmlattr: data-markdown
        sections:
            - type: code
              htmlattr: 'style="font-size: 0.79em;"'
              content: |
                  return function (ContainerConfigurator $container) {
                      $container->import('legacy_services.php');

                      $params = $container->parameters();
                      $params->set('app.foo_param', 'param_value');

                      $container = $container->services()->defaults()
                          ->private()
                          ->autoconfigure()
                          ->autowire();

                      $container->load('App\\', '../src/*')
                          ->exclude('../src/{Entity,Repository,Tests}');

                      $container->load('App\\Controller\\', '../src/Controller')
                          ->tag('controller.service_arguments');

                      $container->alias('foo', FooClass::class)->public();
                  };
            - type: quote
              quote_source: https://symfony.com/blog/new-in-symfony-3-4-php-based-configuration-for-services-and-routes

    3-4-php-based-configuration-for-routes:
        title: '3.4: Config PHP _fluent_ pour les routes'
        title_htmlattr: data-markdown
        sections:
            - type: code
              content: |
                  return function (RoutingConfigurator $routes) {
                      $routes->import('legacy_routes.php')
                          ->prefix('/legacy')
                      ;

                      $routes->add('product', '/products/{id}')
                          ->controller('App\Controller\ProductController::show')
                          ->schemes(['https'])
                          ->requirements(['id' => '\d+'])
                          ->defaults(['id' => 0]);

                      $routes->add('homepage', '/')
                          ->controller('App\Controller\DefaultController::index');
                  };
            - type: quote
              quote_source: https://symfony.com/blog/new-in-symfony-3-4-php-based-configuration-for-services-and-routes

    3-4-advanced-environment-variables:
        title: '3.4: Variables d''environnement avanc√©es'
        sections:
            - type: code
              code_language: bash
              content: |
                  parameters:
                      project_dir: '/foo/bar'
                      env(DB): 'sqlite://%%project_dir%%/var/data.db'
                      db_dsn: '%env(resolve:DB)%'

                      app.connection.port: '%env(int:DATABASE_PORT)%'

                      env(SECRETS_FILE): '/etc/secure/example.com/secrets.json'
                      app.secrets: '%env(json:file:SECRETS_FILE)%'

                      env(SOME_VALUE): 'NWE3OWExYzg2NmVmZWY5Y2ExODAwZjk3MWQ2ODlmM2U='
                      app.some_value: '%env(base64:SOME_VALUE)%'

                      env(NUM_ITEMS): 'App\\Entity\\BlogPost::NUM_ITEMS'
                      app.num_items: '%env(constant:NUM_ITEMS)%'
            - type: quote
              quote_source: https://symfony.com/blog/new-in-symfony-3-4-advanced-environment-variables

    3-4-improved-comparison-constraints:
        title: '3.4: Ajout de `propertyPath` dans les contraintes'
        title_htmlattr: data-markdown
        sections:
            - type: code
              content: |
                  /*
                   * Avant
                   * @Assert\Expression("value > this.startDate")
                   *
                   * Apr√®s
                   * @Assert\GreaterThan(propertyPath="startDate")
                   */
            - type: quote
              quote_source: https://symfony.com/blog/new-in-symfony-3-4-improved-comparison-constraints
        notes: |
            Dispo pour les contraintes de comparaison.

    3-4-prefix-all-controller-route-names:
        title: '3.4: Pr√©fixe de nom pour les routes d''un contr√¥leur'
        sections:
            - type: code
              htmlattr: 'style="font-size: 0.9em;"'
              content: |
                  use Symfony\Component\Routing\Annotation\Route;

                  /** @Route("/blog", name="blog_") */
                  class BlogController extends Controller
                  {
                      /**
                       * @Route("/", defaults={"page": "1"}, name="index")
                       * @Route("/page/{page}", name="index_paginated")
                       */
                      public function indexAction($page, $_format) { ... }

                      /**
                       * @Route("/posts/{slug}", name="post")
                       */
                      public function showAction(Post $post) { ... }
                  }
            - content: |
                  Routes : `blog_index`, `blog_index_paginated`, `blog_post`.
            - type: quote
              quote_source: https://symfony.com/blog/new-in-symfony-3-4-prefix-all-controller-route-names

    3-4-lazy-commands:
        title: '3.4: Commandes charg√©es en mode _lazy_'
        title_htmlattr: data-markdown
        sections:
            - type: code
              title: Dans la config
              content: |
                  app.command.complex_command:
                      tags:
                          - { name: console.command, command: app:my-command }
            - type: code
              title: Dans la classe directement
              content: |
                use Symfony\Component\Console\Command\Command;

                class MySuperCommand extends Command
                {
                    protected static $defaultName = 'app:my-command';

                    // ...
                }
            - type: quote
              quote_source: https://symfony.com/blog/new-in-symfony-3-4-lazy-commands

    3-4-validator-information-in-the-symfony-profiler:
        title: '3.4: Validator dans le profiler'
        sections:
            - content: |
                  ![Redesign exception]({{ asset('img/validator_profiler_1.png') }})
            - type: raw
              content: |
                  <img src="{{ asset('img/validator_profiler_2.jpg') }}" style="width: 30%;vertical-align: top;">
                  <img src="{{ asset('img/validator_profiler_3.jpg') }}" style="width: 30%;vertical-align: top;">
            - type: quote
              quote_source: https://symfony.com/blog/new-in-symfony-3-4-validator-information-in-the-symfony-profiler

    start_4.0:
        sections:
            - content: |
                  # Symfony 4.0
        notes: |
            | Version | Sortie | Fin de maintenance | Fin de vie |
            | :---: | :---: | :---: | :---: |
            | 4.0 | 11/2017 | 07/2018 | 01/2019 |

    start_4.1:
        sections:
            - content: |
                  # Symfony 4.1
        notes: |
            | Version | Features | Sortie | Fin de maintenance | Fin de vie |
            | :---: | :---: | :---: | :---: | :---: |
            | 4.1 | 17+ | 11/2017 | 07/2018 | 01/2019 |

    explanation_4.1:
        sections:
            - content: |
                  Mais au fait...
            - is_fragment: true
              content: |
                Comment on fait pour savoir ce qu'il y a de nouveau dans Symfony 4.1?
            - is_fragment: true
              content: |
                ‚áí http://symfony.com/blog/category/living-on-the-edge
            - is_fragment: true
              content: |
                ‚áí http://github.com/pierstoval/livingedge

    flex:
        content: '# Flex'
        notes: |
            | Version | Sortie | Fin de maintenance | Fin de vie |
            | :---: | :---: | :---: | :---: |
            | Flex | 05/2017 | - | - |

    flex_fail:
        title: Avant Flex
        title_htmlattr: 'style="color:white;text-shadow:0 0 10px #000;"'
        htmlattr: data-background-image="{{ asset('img/flex_fail.gif') }}"

    flex_1:
        title: C'est quoi Flex ?
        sections:
            - is_fragment: true
              content: Un plugin Composer ([symfony/flex](https://packagist.org/packages/symfony/flex))
            - is_fragment: true
              content: Le serveur Flex ([symfony.sh](https://symfony.sh))
            - is_fragment: true
              content: Les recettes (_recipes_) officielles ([symfony/recipes](https://github.com/symfony/recipes))
            - is_fragment: true
              content: Les recettes (_recipes_) "contrib" ([symfony/recipes-contrib](https://github.com/symfony/recipes-contrib))

    flex_so_old:
        htmlattr: data-background-image="{{ asset('img/old_biff.gif') }}"
        notes: |
            Encore un autre outil...

    flex_eminem_wrong:
        title_htmlattr: 'style="color:white;text-shadow:0 0 10px #000;"'
        sections:
            - content: |
                  ![]({{ asset('img/eminem_wrong.gif') }})

    flex_2:
        title: Comment on s'en sert ?
        sections:
            - type: code
              is_fragment: true
              code_language: bash
              content: |
                  composer require symfony/flex

    flex_3:
        title: Qu'est-ce que √ßa cache ?
        sections:
            - is_fragment: true
              content: |
                ![]({{ asset('img/malabar.png') }})

    flex_struct:
        title: Qu'est-ce que √ßa ~~cache~~ apporte ?
        title_htmlattr: data-markdown
        sections:
            - type: code
              code_language: text
              htmlattr: 'style="width: 49%; float: left;"'
              content: |
                  ‚îú‚îÄ‚îÄ app
                  ‚îÇ¬†¬† ‚îú‚îÄ‚îÄ config
                  ‚îÇ¬†¬† ‚îî‚îÄ‚îÄ Resources
                  ‚îÇ¬†¬†     ‚îî‚îÄ‚îÄ views
                  ‚îÇ¬†¬†         ‚îî‚îÄ‚îÄ default
                  ‚îú‚îÄ‚îÄ bin
                  ‚îú‚îÄ‚îÄ src
                  ‚îÇ¬†¬† ‚îî‚îÄ‚îÄ AppBundle
                  ‚îÇ¬†¬†     ‚îî‚îÄ‚îÄ Controller
                  ‚îú‚îÄ‚îÄ tests
                  ‚îÇ¬†¬† ‚îî‚îÄ‚îÄ AppBundle
                  ‚îÇ¬†¬†     ‚îî‚îÄ‚îÄ Controller
                  ‚îú‚îÄ‚îÄ var
                  ‚îÇ¬†¬† ‚îú‚îÄ‚îÄ cache
                  ‚îÇ¬†¬† ‚îú‚îÄ‚îÄ logs
                  ‚îÇ¬†¬† ‚îî‚îÄ‚îÄ sessions
                  ‚îú‚îÄ‚îÄ vendor
                  ‚îî‚îÄ‚îÄ web
                  </pre>
            - type: code
              code_language: text
              htmlattr: 'style="width: 49%; float: right;"'
              content: |
                  ‚îú‚îÄ‚îÄ bin
                  ‚îú‚îÄ‚îÄ config
                  ‚îÇ¬†¬† ‚îî‚îÄ‚îÄ packages
                  ‚îÇ¬†¬†     ‚îú‚îÄ‚îÄ dev
                  ‚îÇ¬†¬†     ‚îî‚îÄ‚îÄ test
                  ‚îú‚îÄ‚îÄ public
                  ‚îú‚îÄ‚îÄ src
                  ‚îÇ¬†¬† ‚îî‚îÄ‚îÄ Controller
                  ‚îú‚îÄ‚îÄ var
                  ‚îÇ¬†¬† ‚îú‚îÄ‚îÄ cache
                  ‚îÇ¬†¬† ‚îî‚îÄ‚îÄ log
                  ‚îî‚îÄ‚îÄ vendor

    flex_4:
        title: Qu'est-ce que √ßa apporte d'autre ?
        title_htmlattr: data-markdown
        sections:
            - type: code
              code_language: bash
              content: |
                  $ composer req server api admin orm behat cs-fixer cors annot twig

    flex_5:
        title: Mais encore ?
        title_htmlattr: data-markdown
        sections:
            - type: raw
              content: |
                  <pre class="p">
                  $ composer req annot
                  Using version ^5.1 for sensio/framework-extra-bundle
                  ./composer.json has been updated
                  Loading composer repositories with package information
                  Updating dependencies (including require-dev)
                  Package operations: 7 installs, 0 updates, 0 removals
                    - Installing doctrine/lexer (v1.0.1): Loading from cache
                    - Installing doctrine/inflector (v1.2.0): Loading from cache
                    - Installing doctrine/collections (v1.5.0): Loading from cache
                    - Installing doctrine/cache (v1.7.1): Loading from cache
                    - Installing doctrine/annotations (v1.5.0): Loading from cache
                    - Installing doctrine/common (v2.8.1): Loading from cache
                    - Installing sensio/framework-extra-bundle (v5.1.2): Loading from cache
                  Writing lock file
                  Generating autoload files
                  Symfony operations: 2 recipes (3ac0e3828e0167b379d5284080768bc5)
                    - Configuring doctrine/annotations (>=1.0): From github.com/symfony/recipes:master
                    - Configuring sensio/framework-extra-bundle (>=4.0): From github.com/symfony/recipes:master
                  Executing script cache:clear [OK]
                  Executing script assets:install --symlink --relative public [OK]
                  </pre>

    flex_6:
        sections:
            - content: |
                  Diff :
            - type: code
              code_language: diff
              content: |
                  diff --git a/config/bundles.php b/config/bundles.php
                  index 49d3fb6..0d71512 100644
                  --- a/config/bundles.php
                  +++ b/config/bundles.php
                  @@ -2,4 +2,5 @@

                   return [
                       Symfony\Bundle\FrameworkBundle\FrameworkBundle::class => ['all' => true],
                  +    Sensio\Bundle\FrameworkExtraBundle\SensioFrameworkExtraBundle::class => ['all' => true],
                   ];
                  diff --git a/config/routes/annotations.yaml b/config/routes/annotations.yaml
                  new file mode 100644
                  index 0000000..d49a502
                  --- /dev/null
                  +++ b/config/routes/annotations.yaml
                  @@ -0,0 +1,3 @@
                  +controllers:
                  +    resource: ../../src/Controller/
                  +    type: annotation

    flex_recipes:
        title: 'Recettes'
        sections:
            - type: code
              code_language: json
              content: |
                  {
                      "bundles": {
                          "Symfony\\Bundle\\FrameworkBundle\\FrameworkBundle": ["all"]
                      },
                      "copy-from-recipe": {
                          "config/": "%CONFIG_DIR%/",
                          "public/": "%PUBLIC_DIR%/",
                          "src/": "%SRC_DIR%/"
                      },
                      "composer-scripts": {
                          "cache:clear": "symfony-cmd",
                          "assets:install --symlink --relative %PUBLIC_DIR%": "symfony-cmd"
                      },
                      "env": {
                          "APP_ENV": "dev",
                          "APP_SECRET": "%generate(secret)%",
                          "#TRUSTED_PROXIES": "127.0.0.1,127.0.0.2",
                          "#TRUSTED_HOSTS": "localhost,example.com"
                      },
                      "gitignore": [
                          ".env",
                          "/public/bundles/",
                          "/var/",
                          "/vendor/"
                      ]
                  }

    flex_create:
        title: 'Cr√©ation d''un projet'
        sections:
            - type: code
              code_language: bash
              content: |
                  $ composer create symfony/website-skeleton monprojet
                  # ...
                  $ composer req admin api
                  # ...
                  $ php bin/console make:controller DefaultController
                  $ php bin/console make:functional-test DefaultControllerTest
                  $ php bin/console make:entity User
                  $ php bin/console make:entity Post
                  $ php bin/console make:command UpdateCommentsStatsCommand
                  $ php bin/console make:voter BlogPostVoter
                  $ php bin/console make:auth FormLoginAuthenticator
                  $ php bin/console make:auth OAuthAuthenticator
                  # ...
                  # ...
                  # Start coding !

    flex_success:
        htmlattr: data-background-image="{{ asset('img/flex_success.gif') }}"

    demo:
        sections:
            - type: raw
              content: |
                  <h1 style="color:#eee;text-shadow:0 0 40px #000,0 0 40px #000,0 0 40px #000,0 0 40px #000,0 0 40px #000;display: block; text-align: center; width: 100%;">Demo</h1>
        htmlattr: data-background-image="{{ asset('img/demo_zelda.gif') }}"

    thanks:
        sections:
            - type: raw
              content: |

                <h1>Merci !</h1>

                <br>
                <br>
                <br>
                <br>

                <code>@pierstoval</code>
